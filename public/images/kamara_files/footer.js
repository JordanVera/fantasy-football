define("modules/footer",["modules/core/tabsCore","jquery"],function(e,t){var a=function(){return{isResizing:!1,options:{onResize:function(e){return function(a){e.isResizing||(e.isResizing=!0,requestAnimationFrame(function(){var a=document.querySelector(".d3-o-footer__nav"),i=t(".d3-o-footer__nav"),n=t(".d3-o-footer__panel-links"),r=parseInt(i.height(),10),o=parseInt(n.css("padding-top"),10),s=null===a?0:parseInt((window.getComputedStyle(a,":before")||{height:0}).height,10),d=t("footer nav").map(function(){return t(this).height()}).get(),f=Math.max.apply(null,d);f>r&&i.height(f+s+o),window.isMobileViewport()?e.setAccordionAttributes():e.setTabAttributes(),e.isResizing=!1}))}}},setAccordionAttributes:function(){var e=t(".d3-o-footer__nav");e.removeAttr("role");var a=e.find('[data-js-hook="footer-nav-trigger"]');a.length&&a.each(function(){t(this).removeAttr("role"),t(this).attr("aria-expanded",t(this).attr("aria-selected"))});var i=e.find('[data-js-hook="footer-nav-panel"]');i.length&&i.each(function(){t(this).removeAttr("role")})},setTabAttributes:function(){var e=t(".d3-o-footer__nav");e.attr("role","tablist");var a=e.find('[data-js-hook="footer-nav-trigger"]');a.length&&a.each(function(){t(this).attr("role","tab"),t(this).removeAttr("aria-expanded")});var i=e.find('[data-js-hook="footer-nav-panel"]');i.length&&i.each(function(){t(this).attr("role","tabpanel")})},init:function(){var i=this,n=function(e,a){e.closest(a.selector).find('button[href!=""][aria-selected=true]').not(e).each(function(){var e=t(this);e.attr("aria-selected","false"),window.isMobileViewport()&&e.attr("aria-expanded","false"),t(e.attr("href")).removeClass("d3-is-selected").attr("aria-hidden","true").hide()})};new e({selector:".d3-o-footer__nav",events:{onItemClick:function(e,t,a){window.isMobileViewport()?("true"===t.attr("aria-expanded")?(t.attr("aria-selected","false"),t.attr("aria-expanded","false"),a.removeClass("d3-is-selected").attr("aria-hidden","true").hide()):(t.attr("aria-selected","true"),t.attr("aria-expanded","true"),a.addClass("d3-is-selected").attr("aria-hidden","false").show()),n(t,e)):(n(t,e),t.attr("aria-selected","true"),a.addClass("d3-is-selected").attr("aria-hidden","false").show())},onTabKeyUp:function(e,a){var i=t(e.target),n=i.parent(),r=i.parents(a.selector),o=r.children("li"),s=r.children("li").index(n);switch(e.which){case 37:case 38:requestAnimationFrame(function(){o.eq(0===s?0:s-1).find("button").focus()});break;case 39:case 40:requestAnimationFrame(function(){o.eq(s===o.length-1?o.length-1:s+1).find("button").focus()})}},onItemKeyUp:function(e,a){var i,n=window.isMobileViewport(),r=t(e.target),o=r.parent(),s=r.parents(".d3-o-footer__panel-links"),d=r.parents("nav").find(".d3-o-footer__panel-links"),f=s.find("li:has(a)").index(o),l=d.index(s),c=0===l,u=l===d.length-1,h=0===f,p=f===s.find("li:has(a)").length-1;switch(e.which){case 37:requestAnimationFrame(function(){n?h?c||s.prev("ul").find("li:has(a)").last().find("a").focus():o.prev("li:has(a)").find("a").focus():(i=d.eq(c?d.length-1:l-1).find("li:has(a)"),i.eq(f).find("a").focus())});break;case 39:requestAnimationFrame(function(){n?p?u||s.next("ul").find("li:has(a)").first().find("a").focus():o.next("li:has(a)").find("a").focus():(i=d.eq(u?0:l+1).find("li:has(a)"),i.eq(f).find("a").focus())});break;case 38:requestAnimationFrame(function(){n?h?c||s.prev("ul").find("li:has(a)").last().find("a").focus():o.prev("li:has(a)").find("a").focus():h?c||s.prev("ul").last("li:has(a)").find("a").focus():o.prev("li:has(a)").find("a").focus()});break;case 40:requestAnimationFrame(function(){n?p?u||s.next("ul").find("li:has(a)").first().find("a").focus():o.next("li:has(a)").find("a").focus():p?s.next("ul").first("li:has(a)").find("a").focus():o.next("li:has(a)").find("a").focus()})}},onInit:function(e){if(window.isMobileViewport()){e.attr("aria-selected","false");var n=t(e.attr("href"));n.length&&n.attr("aria-hidden","true").removeClass("d3-is-selected").hide(),i.setAccordionAttributes()}else i.setTabAttributes();t(window).on("resize.footer",i.options.onResize(a)).trigger("resize.footer")}}})}}}();return a.init(),a});
//# sourceMappingURL=footer.js.map