define("modules/navigation",["jquery","modules/helpers/browserHelper"],function(a,n){var s={navWrapperClass:".d3-o-nav__wrap",navLogoClass:".d3-o-nav__logo",searchClass:".d3-o-nav__search",searchIsOpenClass:"d3-o-search--is-open",hamburgerIsOpenClass:"d3-o-hamburger--is-active",hamburgerClass:".d3-o-nav__hamburger",navIsOpenClass:"d3-o-nav--is-open",moreIsClicked:"d3-o-nav__more-is-clicked",searchInput:".d3-o-search__input",searchOpenBtn:".d3-o-search__open-btn",searchCloseBtn:".d3-o-search__close-btn",navIsStickyClass:"d3-o-nav--is-sticky",hasStickyNavClass:"nfl-has-sticky-nav",hasSecondaryNavClass:"d3-o-nav__has-secondary-nav",hasSecondaryNavWithAdClass:"d3-o-nav__has-secondary-nav-with-ad",preventScrollClass:"nfl-u-disable--scrolling"},e=a("body"),i=a("html");return function(){return{$navigation:a(),options:{onSearchClick:function(n){return function(e){var i=a(e.target);i=i.is("button")?i:i.parents("button"),i.is(s.searchOpenBtn)||i.closest(s.searchOpenBtn).length?n.$navigation.hasClass(s.searchIsOpenClass)||(e.preventDefault(),n.$navigation.addClass(s.searchIsOpenClass).find(s.searchInput).focus()):(i.is(s.searchCloseBtn)||i.closest(s.searchCloseBtn).length)&&(n.$navigation.removeClass(s.searchIsOpenClass),n.$navigation.find(s.searchOpenBtn).focus()),n.$navigation.hasClass(s.searchIsOpenClass)?i.parents(s.searchClass).on("keyup.nav.search",function(a){27===a.which&&i.parents(s.searchClass).find(s.searchCloseBtn).trigger("click")}):i.parents(s.searchClass).off("keyup.nav.search")}},onHamburgerClick:function(n){return function(e){e.preventDefault();var i=a(e.target);i.closest(s.hamburgerClass).length&&(i=i.closest(s.hamburgerClass)),i.toggleClass(s.hamburgerIsOpenClass).attr("aria-expanded",i.hasClass(s.hamburgerIsOpenClass)),n.$navigation.toggleClass(s.navIsOpenClass),n.preventBodyScroll(n),i.hasClass(s.hamburgerIsOpenClass)?(i.parents(s.navWrapperClass).on("keyup.nav.hamburguer",function(a){27===a.which&&i.trigger("click.nav.hamburger")}),i.parents(s.navWrapperClass).on("keydown.nav.hamburguer",function(n){if(9===n.which){var e=a(document.activeElement),i=a(this).find(".d3-o-nav__item:visible");requestAnimationFrame(function(){if(n.shiftKey)e.is(s.navLogoClass)&&(i.last().find("a").focus(),n.preventDefault());else{var t=e.is("a")?e.parent(".d3-o-nav__item"):e;i.index(t)===i.length-1&&(a(s.navLogoClass).focus(),n.preventDefault())}})}})):i.parents(s.navWrapperClass).off("keyup.nav.hamburguer").off("keydown.nav.hamburguer")}},onDropdownTriggerClick:function(n){return function(e){e.preventDefault();var i=a(e.target);i.is('a[data-value="dropdown_trigger"]')||(i=i.closest('a[data-value="dropdown_trigger"]')),i.toggleClass(s.moreIsClicked).attr("aria-expanded",i.hasClass(s.moreIsClicked)),n.$navigation.find(".d3-o-nav__dropdown").toggleClass(s.navIsOpenClass)}},onScroll:function(n){return function(){var s=n.getStartOffset(n);n.addStickyClass(n,a(window).scrollTop(),s),requestAnimationFrame(n.options.onScroll(n))}}},addStickyClass:function(a,n,i){n>=i?(a.$navigation.addClass(s.navIsStickyClass),e.addClass(s.hasStickyNavClass)):(a.$navigation.removeClass(s.navIsStickyClass),e.removeClass(s.hasStickyNavClass))},getStartOffset:function(a){var n=a.$navigation.offset().top,s=a.$navigation.prevAll().first();return s.length&&(n=s.height()+s.offset().top),n+=a.$navigation.height(),void 0===a.$navigation.data("startOffset")&&a.$navigation.data("startOffset",n),a.$navigation.data("startOffset")},addActionRelatedLinkToPrimaryNavigation:function(a){var n=a.$navigation.find(".d3-o-nav--action-related--mobile"),s=n.find(".d3-o-list li");s.addClass("d3-o-nav__item--action-related");var e=a.$navigation.find(".d3-o-nav__item--has-submenu");if(e.length)s.insertBefore(e);else{e=a.$navigation.find(".d3-o-nav--primary").children(".d3-o-nav__list").find(".d3-o-nav__item:last"),s.insertAfter(e)}n.remove()},checkSecondaryNavigation:function(a){a.hasClass(s.hasSecondaryNavClass)&&e.addClass("nfl-has-secondary-nav"),a.hasClass(s.hasSecondaryNavWithAdClass)&&e.addClass("nfl-has-secondary-nav--width-ad")},preventBodyScroll:function(a){i.toggleClass(s.preventScrollClass),e.toggleClass(s.preventScrollClass)},checkMenuItemsDeviceVisibility:function(s){s.find('a[data-custom-properties*="devicevisibility"]').each(function(){var s=a(this).attr("data-custom-properties"),e=JSON.parse(s.toLowerCase());if(e.devicevisibility){var i=e.devicevisibility.split("|"),t=n.isTabletIOS(),o=n.isMobile();(t&&i.indexOf("ipad")>-1||o&&i.indexOf("mobile")>-1)&&a(this).css("display","block")}})},initScroll:function(a){return function(){a.options.onScroll(a)()}},initByElement:function(n){var e=this,i=a(n);e.$navigation=i,i.find(".d3-o-search__close-btn, .d3-o-search__open-btn").on("click.nav.search",e.options.onSearchClick(e)),i.find(s.hamburgerClass).on("click.nav.hamburger",e.options.onHamburgerClick(e)),i.find('nav li a[data-value="dropdown_trigger"]').on("click.nav.dropdowntrigger",e.options.onDropdownTriggerClick(e)),window.googletag&&window.googletag.pubadsReady?(window.googletag.pubads().addEventListener("slotOnload",function(a){e.initScroll(e)()}),a(window).on("load.nav",function(){e.initScroll(e)()})):e.initScroll(e)(),e.addActionRelatedLinkToPrimaryNavigation(e),e.checkSecondaryNavigation(i),e.checkMenuItemsDeviceVisibility(i)}}}()});
//# sourceMappingURL=navigation.js.map