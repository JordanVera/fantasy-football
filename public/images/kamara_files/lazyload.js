define("modules/lazyload",["jquery_visible","jquery"],function(t,e){var i=function(){return{setSrcSet:function(t,e){return function(){var i=this,r=function(){var e=i.getAttribute("srcset");e||(e=i.getAttribute("data-srcset")),i.setAttribute("srcset",e.replace(new RegExp(t,"gi"),""))};if(e&&e.applyImmediate)return void r();requestAnimationFrame(r)}},setImgSrc:function(t,i){return function(){var r=this,a=e(this),n=function(){var e=a.attr("src");e&&!e.match(/^data:image\//g)||(e=r.getAttribute("data-src")),a.data("lazyEffects")||a.data("lazyEffects",t);var i=a.data("lazyEffects");a.attr("src",e.replace(new RegExp(i,"gi"),""))};if(i&&i.applyImmediate)return void n();requestAnimationFrame(n)}},handleLazyCollection:function(t,i){if(t.length){i||(i={});var r,a=this;return t.each(function(){var t=e(this);if(i.skipVisibilityCheck||t.visible(!0,!1,"both")){r=r?r.add(t):t;var n=this.getAttribute("is-lazy");t.find("img").each(a.setImgSrc(n,i)),t.find("source").each(a.setSrcSet(n,i))}}),r&&r.length&&(window.picturefill&&window.picturefill({reevaluate:!0,elements:r.toArray()}),r.removeAttr("is-lazy"),r.attr("is-loaded","true")),t}},manageLazyness:function(){var t=this;t.animationFrame=requestAnimationFrame(function(){t.handleLazyCollection(t.$lazyCollection),t.animationFrame=requestAnimationFrame(t.init.bind(t))})},$lazyCollection:void 0,animationFrame:void 0,init:function(){var t=this;if(t.$lazyCollection=e("*[is-lazy]"),"IntersectionObserver"in window){var i=new window.IntersectionObserver(function(i,r){var a,n=0,o=i.length;for(n;n<o;n++){var s=i[n];if(s.isIntersecting){var c=e(s.target);a=a?a.add(c):c;var l=s.target,u=l.getAttribute("is-lazy");c.find("img").each(t.setImgSrc(u)),c.find("source").each(t.setSrcSet(u)),r.unobserve(l)}}a&&a.length&&(window.picturefill&&window.picturefill({reevaluate:!0,elements:a.toArray()}),a.removeAttr("is-lazy"),a.attr("is-loaded","true"))});return void t.$lazyCollection.each(function(){i.observe(this)})}t.manageLazyness()},refresh:function(){this.init()}}}();return i.init(),window.lazyLoadHelper=i,i});
//# sourceMappingURL=lazyload.js.map