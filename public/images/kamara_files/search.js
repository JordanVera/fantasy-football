define("modules/search",["jquery","autocomplete"],function(e,t){var o={selector:"#query",suggestionSelector:"query-suggestion",appendToSelector:".d3-o-nav__search-result",closeButton:".d3-o-search__close-btn",maxHeight:700,minChars:3,noResultFoundLabel:" ",events:{onKeyUp:function(t){return function(t){(e(t.target).val().length<3||"ArrowUp"===t.key||"ArrowDown"===t.key)&&(document.getElementById(o.suggestionSelector).innerHTML="")}},onCloseButton:function(e){return function(){document.getElementById(o.suggestionSelector).innerHTML="",e.$selector.val("")}}},resultMapping:function(t){var o=JSON.parse(t);return{suggestions:e.map(o,function(e){return{value:e.title||e.keyword||"",data:e.url||""}})}},autocompleteInput:function(e,t){for(var n="^"+e,r=new RegExp(n,"i"),i=document.getElementById(o.suggestionSelector),u=0;u<t.length;u++)if(t[u].value.match(r))return void(i.innerHTML=t[u].value);i.innerHTML=""},onSelect:function(e){window.location.href=e.data},autocompleteConfig:function(e){return{minChars:e.options.minChars,maxHeight:e.options.maxHeight,deferRequestBy:200,appendTo:e.options.appendToSelector,serviceUrl:"/api/search/autocomplete",transformResult:e.resultMapping,onSearchComplete:e.autocompleteInput,onSelect:e.options.onSelect,showNoSuggestionNotice:!0,noSuggestionNotice:e.options.noResultFoundLabel,autoSelectFirst:!1,triggerSelectOnValidInput:!1}}};return function(){return{$wrap:e(),$selector:void 0,options:void 0,resultMapping:void 0,autocompleteInput:void 0,$closeButton:void 0,minChars:void 0,initByElement:function(t){var n=this;n.$wrap=e(t),n.options=e.extend({},o),n.$closeButton=n.$wrap.find(n.options.closeButton),n.$selector=e(n.options.selector),n.resultMapping=n.options.resultMapping,n.autocompleteInput=n.options.autocompleteInput,n.$selector.autocomplete(n.options.autocompleteConfig(n)),n.$selector.on("keyup.search",n.options.events.onKeyUp(n)),n.$closeButton.on("click.search",n.options.events.onCloseButton(n))}}}()});
//# sourceMappingURL=search.js.map